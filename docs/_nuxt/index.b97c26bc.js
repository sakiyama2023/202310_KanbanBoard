import{_ as N,m,q as T,s as e,d as $,t as O,z as A,A as B,r as v,I,J as b,K as U,L,M,N as w,O as V,v as H,c as P,P as R}from"./entry.d35dd5c0.js";const q={},z={class:"header"},E=e("h1",null,"Team Board",-1),F=[E];function J(r,o){return m(),T("div",z,F)}const K=N(q,[["render",J]]),j=""+new URL("trashbox.07c3e5f4.png",import.meta.url).href,G=""+new URL("kkrn_icon_user_1.3e1693c0.png",import.meta.url).href,Q=r=>(A("data-v-825157a5"),r=r(),B(),r),W={class:"task-wrapper"},X={class:"user-wrapper"},Y=Q(()=>e("img",{src:G,class:"user-icon"},null,-1)),Z=$({__name:"TaskItem",props:{task:{}},emits:["deleteTask"],setup(r,{emit:o}){const d=r,t=()=>{o("deleteTask",d.task.id)};return(s,i)=>(m(),T("div",null,[e("div",W,[e("p",null,O(s.task.name),1),e("img",{src:j,class:"delete-button",onClick:t})]),e("div",X,[Y,e("p",null,O(s.task.incharge_user),1)])]))}});const ee=N(Z,[["__scopeId","data-v-825157a5"]]),D=r=>(A("data-v-6723f760"),r=r(),B(),r),ae={class:"modal_contents"},te={class:"modal_contents_wrap"},se=D(()=>e("tr",null,[e("th"),e("td",null,[e("div",{class:"err-msg-name"})])],-1)),ne=D(()=>e("th",null,[e("label",{for:"taskName"},"タスク名")],-1)),oe=D(()=>e("tr",null,[e("th"),e("td",{class:"err-msg-pass"})],-1)),le=D(()=>e("th",null,[e("label",{for:"endDate"},"締め切り")],-1)),de=D(()=>e("tr",null,[e("th"),e("td",{class:"err-msg-passre"})],-1)),re=D(()=>e("th",null,[e("label",{for:"incharge_user"},"担当者")],-1)),ce=$({__name:"modal",emits:["close","addTask"],setup(r,{emit:o}){const d=v(""),t=v(""),s=v("");function i(){if(d.value!==""){const p={id:0,category_id:0,name:d.value,end_date:t.value,incharge_user:s.value,percentage:0};o("addTask",p),x()}}function h(){o("close"),x()}function x(){d.value="",t.value="",s.value=""}return(p,c)=>(m(),T("div",ae,[e("div",{onClick:h,class:"modal_contents_bg"}),e("div",te,[e("span",{onClick:h,class:"modal_close_btn"},"×"),e("table",null,[e("tbody",null,[se,e("tr",null,[ne,e("td",null,[I(e("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=g=>d.value=g),class:"form"},null,512),[[b,d.value]])])]),oe,e("tr",null,[le,e("td",null,[I(e("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=g=>t.value=g),class:"form"},null,512),[[b,t.value]])])]),de,e("tr",null,[re,e("td",null,[I(e("input",{type:"text","onUpdate:modelValue":c[2]||(c[2]=g=>s.value=g),class:"form"},null,512),[[b,s.value]])])])])]),e("div",{class:"add-button",onClick:i},"Add Task")])]))}});const _e=N(ce,[["__scopeId","data-v-6723f760"]]),ue={class:"category-name"},ie=$({__name:"CategoryItem",props:{categoryTask:{}},emits:["setDragTask","dragOverTask","setDragCategory","dragOverCategory","addTask","deleteTask"],setup(r,{emit:o}){const d=r,t=n=>{o("setDragTask",n)},s=n=>{o("dragOverTask",n)},i=n=>{o("setDragCategory",n)},h=n=>{o("dragOverCategory",n)},x=n=>{o("deleteTask",n)},p=v(!1);function c(){p.value=!p.value,g.value=""}let g=v("");function C(n){n.category_id=d.categoryTask.id,o("addTask",n),g.value="",c()}return(n,k)=>{const a=ee,_=_e;return m(),T("div",{class:"category",onDragstart:k[1]||(k[1]=w(l=>i(n.categoryTask),["self"])),onDragover:k[2]||(k[2]=w(l=>h(n.categoryTask),["prevent"])),draggable:"true"},[e("div",ue,O(n.categoryTask.name),1),(m(!0),T(U,null,L(n.categoryTask.tasks,l=>(m(),M(a,{class:"task",key:l.id,task:l,onDragstart:f=>t(l),onDragover:w(f=>s(l),["prevent"]),onDeleteTask:x,draggable:"true"},null,8,["task","onDragstart","onDragover"]))),128)),I(H(_,{onAddTask:C,onClose:c},null,512),[[V,p.value]]),I(e("div",{class:"add-task",onClick:k[0]||(k[0]=l=>c())}," + Add task ",512),[[V,!p.value]])],32)}}});const ge=[{id:1,category_id:1,name:"テスト1",start_date:"2020-12-18",end_date:"2020-12-20",incharge_user:"鈴木",percentage:100},{id:2,category_id:1,name:"テスト2",start_date:"2020-12-19",end_date:"2020-12-23",incharge_user:"佐藤",percentage:90},{id:3,category_id:3,name:"テスト3",start_date:"2020-12-19",end_date:"2020-12-21",incharge_user:"鈴木",percentage:40},{id:4,category_id:2,name:"テスト4",start_date:"2020-12-21",end_date:"2020-12-30",incharge_user:"山下",percentage:60},{id:5,category_id:2,name:"テスト5",start_date:"2020-12-20",end_date:"2020-12-22",incharge_user:"佐藤",percentage:5},{id:6,category_id:1,name:"テスト6",start_date:"2020-12-28",end_date:"2020-12-08",incharge_user:"佐藤",percentage:0}],ve=[{id:1,name:"To do",collapsed:!1},{id:2,name:"In Progress",collapsed:!1},{id:3,name:"Done",collapsed:!1}],pe={class:"main"},ke=$({__name:"index",setup(r){const o=v(""),d=v(ve),t=v(ge),s=v(null),i=v(null),h=t.value.length,x=P(()=>d.value.map(a=>{const _=t.value.filter(l=>l.category_id===a.id);return{id:a.id,name:a.name,tasks:_}}));function p(a){s.value=a,o.value="task"}function c(a){var _;if(a.id!==((_=s.value)==null?void 0:_.id)&&o.value==="task"){const l=t.value.findIndex(u=>{var y;return u.id===((y=s.value)==null?void 0:y.id)}),f=t.value.findIndex(u=>u.id===a.id);s.value!==null&&(t.value.splice(l,1),s.value.category_id=a.category_id,t.value.splice(f,0,s.value))}}function g(a){i.value=a,o.value="category"}function C(a){var _,l;if(((_=i.value)==null?void 0:_.id)!==a.id&&o.value==="category"){const f=d.value.findIndex(y=>{var S;return y.id===((S=i.value)==null?void 0:S.id)}),u=d.value.findIndex(y=>y.id===a.id);i.value!==null&&(d.value.splice(f,1),d.value.splice(u,0,i.value))}else((l=s.value)==null?void 0:l.category_id)!==a.id&&o.value==="task"&&t.value.filter(u=>u.category_id===a.id).length===0&&s.value!==null&&(s.value.category_id=a.id)}function n(a){a.id=t.value.length+1,t.value.push(a)}function k(a){const _=t.value.findIndex(l=>l.id===a);t.value.splice(_,1)}return(a,_)=>{const l=K,f=ie;return m(),T("div",null,[H(l),e("div",pe,[(m(!0),T(U,null,L(x.value,u=>(m(),M(f,{class:"category-container",key:u.id,categoryTask:u,taskTotalNumber:R(h),onSetDragTask:p,onDragOverTask:c,onSetDragCategory:g,onDragover:y=>C(u),onAddTask:n,onDeleteTask:k},null,8,["categoryTask","taskTotalNumber","onDragover"]))),128))])])}}});export{ke as default};
